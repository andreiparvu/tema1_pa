\documentclass[a4paper,5pt]{article}
\usepackage{color}
\usepackage{fancyhdr}
\pagestyle{fancy}

\pagenumbering{arabic}

\usepackage{combelow}
\usepackage{hyperref}
\usepackage{fontspec} 
\usepackage{xeCJK}
\lhead[\thepage]{Proiectarea Algoritmilor 2014}
\rhead[\thepage]{Tema 1}
\hyphenation{e-xe-cu-ți-a}

\begin{document}

\hspace{2mm}\\[7cm]

\begin{center}

\Large
\textbf{Proiectarea Algoritmilor - Tema 1}\\[10mm]
\large
\textbf{Dată publicare: 5 martie 2014}\\[5mm]
\textbf{Deadline: 23 martie 2014 - 23:55}\\[5mm]
{\hspace{0.7mm} Ioana Alexandra Antoche}\\
{\hspace{0.7mm} Andrei Pârvu}\\
{\hspace{0.7mm} Andrei Poenaru}\\

\end{center}

\newpage

\normalsize

\section{Introducere}

Ajunși în anul doi la facultate, studenții de la Automatică și Calculatoare au
învățat două concepte noi și interesante: strategia greedy și programarea
dinamică. După ce și-au format o părere despre cele două, le-a fost cerut
să rezolve două probleme pentru ca noile cunoștințe să nu rămână nefolosite
(și implicit să se uite).

\normalsize

\section{Prima problemă - Sauron - 40 de puncte}

După ce Sauron a pierdut inelul puterii acesta a decis să se retragă pentru o 
vreme în ascunzatoarea sa secretă pentru a plănui un nou atac. 
Fără inelul puterii acesta trebuie acum să se bazeze doar pe cele 
$2*N$ perechi de orci care au supraviețuit dezastrului. 
El are notat pe o piatră vulcanică (suficient de mare) pentru fiecare membru 
al perechii câte victime a realizat în ultimul război. 
În fiecare pereche, primul orc are rangul mai mare, deci el se numește Stăpân, iar
celălalt orc se numește Sclav.
Pentru a le ridica moralul slujitorilor săi, Sauron s-a gândit să își răsplătească
supușii, plătind $2*N$ salarii, câte unul pentru fiecare pereche.
Valoarea unui salariu reprezintă numărul de victime ale Stăpânului sau ale Sclavului 
dintr-o echipă.
Pentru că Sauron este lacom din fire el vrea să minimizeze pe cât posibil 
suma totală plătită, impunându-și însă câteva reguli:
\begin{itemize}
\item Dintre cele $2*N$ perechi el trebuie să aleagă $N$ Stăpâni și $N$ Sclavi.
\item Trebuie să plătească exact $N$ salarii corespunzătoare Stăpânilor aleși și exact 
$N$ salarii corespunzătoare Sclavilor aleși
\item \textcolor{red}{din fiecare pereche trebuie plătit un singur orc - Stăpânul sau Sclavul}
\end{itemize}
Dintre cei $2*N$ orci plătiți, Sauron va trebui să formeze $N$ noi perechi astfel:
\begin{itemize}
\item se va grupa obligatoriu un Stăpân cu un Sclav
\item pentru orice nouă pereche, indicele perechii inițiale din care este ales
\item Sclavul trebuie să fie mai mic decât indicele perechii inițiale din care este ales
Stăpânul său. Indicii sunt dați de ordinea în care apar cele $2*N$ perechi pe piatra vulcanică.
\end{itemize}

\textbf{Cerințe}: \\
Sauron și-a dat seama că nu este un bun strateg atunci când a pierdut inelul 
puterii, iar acum își dă seama că nu e nici un bun programator. De aceea, vă 
roagă pe voi să îl ajutați să rezolve această problemă. Fiind foarte lacom, 
răsplata voastră va fi  doar de 40 de puncte  dacă reușiți să îi spuneți atât suma
minimă pe care o va plăti în total, cât și dacă îi dați o regrupare corectă a 
celor $N$ perechi de orci care se vor forma în final.

\textbf{Date de intrare}: \\
Pe prima linie a fișierului de intrare se va afla numărul de perechi de orci 
($2*N$), în ordinea care apar pe piatra vulcanică.
Pe următoarele $2*N$ linii se vor afla câte două numere
pe linie, reprezentând numărul de victime ale primului orc (Stăpânului) și
numarul de victime ale celui de-al doilea orc (Sclavul).

\textbf{Date de ieșire}: \\
Pe prima linie din fișierul de ieșire veți afișa suma minimă pe care poate Sauron să o 
plătească în total, iar pe următoarele $N$ linii se vor afișa câte două valori:
Stăpânul care va rămâne și Sclavul cu care va fi împerecheat.
\textcolor{red}{Atenție: atât Stăpânul, cât și Sclavul sunt identificați prin indicele perechii din care
făceau parte în datele de intrare.}

Exemplu: \\
date.in: \\
\rule{50mm}{0.1mm}\\
\noindent
$6$ \\
$3\ 0$ \\
$7\ 1$ \\
$2\ 0$ \\
$5\ 1$ \\ 
$6\ 0$ \\
$4\ 2$ \\
\rule{50mm}{0.1mm}\\
\indent

date.out \\
\rule{50mm}{0.1mm}\\
\noindent
$12$ \\
$3\ 1$ \\
$4\ 2$ \\
$6\ 5$ \\
\rule{50mm}{0.1mm}\\
\indent

Explicație:
pt 2*N = 6
\begin{itemize}
	\item id: stapân sclav
	\item 1: 3 0
	\item 2: 7 1
	\item 3: 2 0
	\item 4: 5 1
	\item 5: 6 0
	\item 6: 4 2
\end{itemize}

Suma minimă care respectă condițiile din enunț se obține plătind perechea 1 cu 
0 galbeni, plătind perechea 2 cu 1 galben, plătind perechea 3 cu 2 galbeni, 
plătind perechea 4 cu 5 galben, plătind perechea 5 cu 0 galbeni și plătind 
perechea 6 cu 4 galbeni.

\textbf{Restricții:}
\begin{itemize}
	\item $2 \le 2*N \le 10 000$
	\item se garantează că rezultatul problemei va încăpea pe un tip de date pe
	32 de biți cu semn.
	\item dacă calculați doar salariul minim, trebuie să existe pentru acesta o
	grupare validă (care să respecte și a doua cerință), chiar dacă nu afișați cele $N$ perechi.
	\item \textcolor{red}{numărul de victime corespunzătoare Stapânului poate fi mai mic 
	decât numărul de victime corespunzătoare Sclavului}
\end{itemize}

\indent
\newpage
\normalsize


\section{A doua problemă - Numărare cadre - 40 de puncte}

În urma izbucnirii războiului dintre umanitate și mașinile inteligente,
conducătorii oamenilor iau decizia de a acoperi cerul cu un nor dens
și a împiedica pătrunderea luminii solare. Fiind privată de principala sursă de
energie, societatea mașinilor intră într-o perioada de recesiune, din care
reușește să iasă prin exploatarea bioenergiei generate de oameni: o formă de
energie similară celei emanate de un gamer înrăit atunci când se delectează cu
jocul favorit, omorând inamici în stanga și în dreapta. Astfel, s-a ajuns la
situația în care mulți oameni sunt captivi într-o realitate virtuală numită
\textit{the Matrix}. Denumirea provine de la modalitatea în care sunt transmise
datele în interiorul sistemului: sub forma unor matrice de valori binare, având
$N$ linii și $M$ coloane.

Faceți parte din divizia IT a rezistenței umane și credeți că ați descoperit o
particularitate a cadrelor de date: pe orice coloană a matricei pare că nu se
găsesc niciodată mai mult de $K$ valori consecutive de $1$. Pentru a vă testa
teoria și a vă aduce contribuția la salvarea omenirii vă sunt necesare
informații despre cadrele interceptate până în prezent. De asemenea, trebuie
să determinați restul la împărțirea prin $40009$ a numărului de cadre
distincte având proprietatea dată.

\textbf{Cerințe}: \\
Aflați numărul de matrice binare cu $N$ linii și $M$ coloane care respectă
proprietatea că pe orice coloană se află cel mult $K$ valori de $1$ consecutive.

\textbf{Exemplu:} Pentru $N = 3,\ M = 1,\ K = 2$ există 7 cadre distincte:

\begin{center}
\begin{tabular}{ | c | }
	\hline
	0 \\
	\hline
	0 \\
	\hline
	0 \\
	\hline
\end{tabular}
\enspace
\begin{tabular}{ | c | }
	\hline
	0 \\
	\hline
	0 \\
	\hline
	1 \\
	\hline
\end{tabular}
\enspace
\begin{tabular}{ | c | }
	\hline
	0 \\
	\hline
	1 \\
	\hline
	0 \\
	\hline
\end{tabular}
\enspace
\begin{tabular}{ | c | }
	\hline
	1 \\
	\hline
	0 \\
	\hline
	0 \\
	\hline
\end{tabular}
\enspace
\begin{tabular}{ | c | }
	\hline
	0 \\
	\hline
	1 \\
	\hline
	1 \\
	\hline
\end{tabular}
\enspace
\begin{tabular}{ | c | }
	\hline
	1 \\
	\hline
	1 \\
	\hline
	0 \\
	\hline
\end{tabular}
\enspace
\begin{tabular}{ | c | }
	\hline
	1 \\
	\hline
	0 \\
	\hline
	1 \\
	\hline
\end{tabular}
\end{center}

\textbf{Date de intrare}: \\
Fișierul de intrare pentru această problemă va conține pe prima și singura linie
 valorile $N$, $M$ și $K$ separate prin spațiu.
Pentru exemplul de mai sus fișierul de intrare ar fi:\\
\rule{50mm}{0.1mm}\\
\noindent
$3\ 1\ 2$\\
\rule{50mm}{0.1mm}\\
\indent

\textbf{Date de ieșire}: \\
Fișierul de ieșire conține pe prima linie numărul (\textit{modulo} $40009$) de
cadre cu $N$ linii, $M$ coloane și care au cel mult $K$ valori de 1 consecutive
pe orice coloană.
Pentru exemplul de mai sus fișierul de ieșire ar fi:\\
\rule{50mm}{0.1mm}\\
\noindent
$7$\\
\rule{50mm}{0.1mm}\\
\indent

\textbf{Restricții:}
\begin{itemize}
\item $1 \le N, M \le 2.000.000.000$
\item $0 \le K \le 40$
\end{itemize}

\section{Bonus - 20 de puncte}
Problema de bonus reprezintă o extensie a problemei 2.

După ce ați analizat suficiente date v-ați dat seama că proprietatea pe care o
bănuiați nu este respectată. Nedorind să renunțați la teoria voastră, decideți
să relaxați puțin restricțiile:  din cele $M$ coloane, $M_1$ conțin \textbf{cel mult}
$K$ valori de $1$ consecutive, iar $M_2$ conțin \textbf{cel puțin} o secvență cu mai
mult de $K$ valori de $1$ consecutive. În mod evident, $M = M_1 + M_2$.

\textbf{Cerințe}: \\
Aflați numărul de matrice binare cu $N$ linii și $M_1 + M_2$ coloane care
respectă proprietatea că pe $M_1$ coloane se află cel mult $K$ valori de $1$
consecutive, iar pe fiecare din celelalte $M_2$ coloane se gasește cel puțin
câte  o secvență având mai mult de $K$ valori de $1$ consecutive. Rezultatul va
fi afișat \textit{modulo} $40009$.

\textbf{Exemplu:}  Pentru $N = 3,\ M_1 = 1,\ M_2 = 1,\ K = 2$ există 14 cadre
diferite:
\begin{center}
\begin{tabular}{ | c | c | }
	\hline
	0 & 1\\
	\hline
	0  & 1\\
	\hline
	0 & 1\\
	\hline
\end{tabular}
\enspace
\begin{tabular}{ | c | c | }
	\hline
	0 & 1\\
	\hline
	0 & 1\\
	\hline
	1 & 1\\
	\hline
\end{tabular}
\enspace
\begin{tabular}{ | c | c | }
	\hline
	0 & 1\\
	\hline
	1 & 1\\
	\hline
	0 & 1\\
	\hline
\end{tabular}
\enspace
\begin{tabular}{ | c | c | }
	\hline
	1 & 1\\
	\hline
	0 & 1\\
	\hline
	0 & 1\\
	\hline
\end{tabular}
\enspace
\begin{tabular}{ | c | c | }
	\hline
	0 & 1\\
	\hline
	1 & 1\\
	\hline
	1 & 1\\
	\hline
\end{tabular}
\enspace
\begin{tabular}{ | c | c | }
	\hline
	1 & 1\\
	\hline
	1 & 1\\
	\hline
	0 & 1\\
	\hline
\end{tabular}
\enspace
\begin{tabular}{ | c | c | }
	\hline
	1 & 1\\
	\hline
	0 & 1\\
	\hline
	1 & 1\\
	\hline
\end{tabular}

\vspace*{1\baselineskip}

\begin{tabular}{ | c | c | }
	\hline
	1 & 0\\
	\hline
	1 & 0\\
	\hline
	1 & 0\\
	\hline
\end{tabular}
\enspace
\begin{tabular}{ | c | c | }
	\hline
	1 & 0\\
	\hline
	1 & 0\\
	\hline
	1 & 1\\
	\hline
\end{tabular}
\enspace
\begin{tabular}{ | c | c | }
	\hline
	1 & 0\\
	\hline
	1 & 1\\
	\hline
	1 & 0\\
	\hline
\end{tabular}
\enspace
\begin{tabular}{ | c | c | }
	\hline
	1 & 1\\
	\hline
	1 & 0\\
	\hline
	1 & 0\\
	\hline
\end{tabular}
\enspace
\begin{tabular}{ | c | c | }
	\hline
	1 & 0\\
	\hline
	1 & 1\\
	\hline
	1 & 1\\
	\hline
\end{tabular}
\enspace
\begin{tabular}{ | c | c | }
	\hline
	1 & 1\\
	\hline
	1 & 1\\
	\hline
	1 & 0\\
	\hline
\end{tabular}
\enspace
\begin{tabular}{ | c | c | }
	\hline
	1 & 1\\
	\hline
	1 & 0\\
	\hline
	1 & 1\\
	\hline
\end{tabular}
\end{center}

\textbf{Date de intrare}: \\
Fișierul de intrare pentru această problemă va conține pe prima și singura linie
 valorile $N$, $M_1$, $M_2$ și $K$ separate prin spațiu.
Pentru exemplul de mai sus fișierul de intrare ar fi:\\
\rule{50mm}{0.1mm}\\
\noindent
$3\ 1\ 1\ 2$\\
\rule{50mm}{0.1mm}\\

\textbf{Date de ieșire}: \\
Fișierul de ieșire conține pe prima linie numărul (\textit{modulo} $40009$) de
cadre cu $N$ linii, $M_1 + M_2$ coloane și care respectă noua proprietate.
Pentru exemplul de mai sus fișierul de ieșire ar fi:\\
\rule{50mm}{0.1mm}\\
\noindent
$14$\\
\rule{50mm}{0.1mm}\\

\textbf{Restricții:}
\begin{itemize}
\item $1 \le N \le 2.000.000.000$
\item $0 \le M_1, M_2 \le 40.000$
\item $1 \le M_1 + M_2 \le 40.000$
\item $0 \le K \le 40$
\end{itemize}

\section{Punctare}
Punctajul pentru primele două probleme este de $40$ de puncte fiecare, iar
bonusul valorează $20$ de puncte. $10$ puncte vor fi acordate pentru
coding-style, $10$ puncte pentru comentarii și README. Pentru detalii puteți să
vă uitați și peste
\href{http://ocw.cs.pub.ro/courses/pa/regulament-general#teme}{regulile
  generale de trimitere a temelor}.\\
Vor exista în total $20$ de teste de $5$ puncte fiecare, $8$ teste pentru
prima problemă, $8$ teste pentru cea de-a doua
și $4$ teste pentru bonus. Pentru prima problemă, din cele $5$ puncte ale unui test,
$4$ puncte se vor acorda pentru aflarea valorii corecte (prima linie din fișierul de ieșire) și
$1$ puncte pentru reconstituirea soluției - punctele pentru reconstituirea
soluției sunt condiționate de aflarea valorii corecte. Pentru a doua problemă și
pentru bonus, nu există punctaje parțiale - un test este fie trecut, fie nu.\\
Punctele pe teste sunt independente, punctajul pe un anumit test nefiind
condiționat de alte teste.\\
Fiecare problemă va avea o limită de timp pe test (precizată mai jos) - dacă 
execuția programului pe un test al acelei probleme va dura mai mult decât
limita de timp veți primi automtat $0$ puncte pe testul respectiv și execuția
va fi întreruptă.
În fișierul README va trebui să descrieți soluția pe care ați ales-o pentru
fiecare problemă, să precizați complexitatea pentru fiecare și alte lucruri pe
care le considerați util de menționat.\\
Corectorii își rezervă dreptul de a scădea puncte dacă vor considera acest
lucru necesar.

\section{Format arhiva și testare}

Temele pot fi testate automat pe \href{elf.cs.pub.ro/vmchecker}{vmchecker} -
acesta suportă temele rezolvate in C/C++ și Java. Dacă doriți să realizați tema
în alt limbaj trebuie să trimiteți un e-mail lui Traian Rebedea
(traian.rebedea@cs.pub.ro) în care să îi cereți explicit acest lucru.\\
Arhiva cu rezolvarea temei trebuie sa fie .zip și să conțină în rădăcina acesteia:
\begin{itemize}
  \item Fișierul/fișierele sursă
  \item Fișierul Makefile
  \item Fișierul README
\end{itemize}
Fișierul pentru make trebuie denumit \textbf{obligatoriu} Makefile și trebuie
să conțină următoarele reguli:
\begin{itemize}
  \item build, care va compila sursele și va obține executabilele.
  \item run-p1, care va rula executabilul pentru problema 1
  \item run-p2, care va rula executabilul pentru problema 2
  \item run-p3, care va rula executabilul pentru problema bonus
  \item clean, care va șterge executabilele generate.
\end{itemize}
\textbf{Atentie!} Numele regulilor trebuie să fie exact cele de mai sus, în
special pentru cele de run. Absența sau denumirea diferită a
acestora va avea drept consecință obținerea a $0$ puncte pe testele echivalente
problemei rezolvate de regula respectivă.\\
\textbf{Atenție} Pentru cei ce folosesc C/C++ \textbf{NU} este permisă compilarea cu
opțiuni de optimizare a codului (O1, O2, etc.).\\
\textbf{Atenție} Pentru fiecare problemă, fișierul de intrare se va numi
$date.in$, iar cel de ieșire $date.out$.\\
Limitele de timp pentru problema 1 sunt:
\begin{itemize}
  \item C/C++ 0.5 secunde
  \item Java 0.6 secunde
\end{itemize}
Limitele de timp pentru problema 2 si problema bonus sunt:
\begin{itemize}
  \item C/C++ 0.5 secunde
  \item Java 0.5 secunde
\end{itemize}

\end{document}
